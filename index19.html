<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="stylesheet19.css">
</head>

<body>

    <section id="screen">
        <section id="screen_left">
            <div class="baggrund_container">
                <div class="forside_container">
                </div>
            </div>

        </section>

        <section id="screen_right">
            <section id="screen_right_json">
                <template id="theTemplate">
                    <img src="" alt="">
                </template>

            </section>
            <section id="screen_right_menu">
                <div><a href="index.html"><img src="assets/forside/tilbage.jpg" alt=""></a></div>
            </section>


        </section>



    </section>

    <script>
        let menuArray;
        const dest = document.querySelector("#screen_right_json");
        const temp = document.querySelector("template");
        let filterHiphop = "alle";
        let filterPop = "alle";
        let filterRock = "alle";
        let filterAlternativ = "alle";
        document.addEventListener("DOMContentLoaded", hentJson);



        async function hentJson() {

            console.log("hentJson");
            let jsonData = await fetch("https://spreadsheets.google.com/feeds/list/1yZS6pl3iEsdF9bigcA8CkcHZruSn6PAEWVfEzQmRIeU/od6/public/values?alt=json");
            menuArray = await jsonData.json();


            visKunstnere();
        }



        function visKunstnere() {
            dest.innerHTML = "";
            menuArray.feed.entry.forEach(artist => {
                if ((filterHiphop == "alle" || filterHiphop == artist.gsx$genre.$t) && (filterPop == "alle" || filterPop == artist.gsx$genre.$t) &&
                    (filterRock == "alle" || filterRock == artist.gsx$genre.$t) &&
                    (filterAlternativ == "alle" || filterAlternativ == artist.gsx$genre.$t)) {

                    console.log("Json loaded");

                    let klon = temp.cloneNode(true).content;
                    klon.querySelector("img").src = `assets/forside/2019/${artist.gsx$ikon.$t}.jpg`;

                    dest.appendChild(klon);

                }
            })

        }

    </script>

</body>

</html>
